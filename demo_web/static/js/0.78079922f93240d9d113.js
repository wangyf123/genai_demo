webpackJsonp([0],{"9bBU":function(e,t,r){r("mClu");var s=r("FeBl").Object;e.exports=function(e,t,r){return s.defineProperty(e,t,r)}},"9hKU":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),o=r.n(s),i=r("bOdI"),a=r.n(i),l={name:"userList",data:function(){var e;return e={queryForm:{},table:{size:20,current:1,pages:0,total:0,records:[]},dTit:"",dialogVisible:!1,statusOptions:[],userTypeOptions:[],roleOptions:this.consts.roleOptions,records:[],groupOptions:[{label:"admin",value:"admin"},{label:"teacher",value:"teacher"},{label:"student",value:"student"}]},a()(e,"roleOptions",[{label:"admin",value:"admin"},{label:"member",value:"member"}]),a()(e,"userGroupList",[]),a()(e,"userForm",{}),a()(e,"userRules",{user_group_id:[{required:!0,message:"用户组必选",trigger:"change"}],name:[{required:!0,message:"用户名必填",trigger:"blur"}]}),e},computed:{userRecords:function(){var e=this;return this.queryForm.name||this.queryForm.user_group||this.queryForm.user_group_role||this.queryForm.status?this.records.filter(function(t){return(!e.queryForm.name||e.queryForm.name&&-1!=t.name.indexOf(e.queryForm.name))&&(!e.queryForm.user_group||e.queryForm.user_group&&e.queryForm.user_group==t.user_group)&&(!e.queryForm.user_group_role||e.queryForm.user_group_role&&e.queryForm.user_group_role==t.user_group_role)&&(!e.queryForm.status||e.queryForm.status&&e.queryForm.status==t.status)&&(!e.queryForm.email||e.queryForm.email&&-1!=t.email.indexOf(e.queryForm.email))}):this.records}},methods:{loadUserGroup:function(){var e=this;e.req("/user_group",{},function(t){t&&t.success?e.userGroupList=t.obj.records:e.$alert(t.message,e.$t("tip.tip"),{confirmButtonText:e.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})},"get",!1)},search:function(){this.table.current=1,this.getData()},reset:function(){this.queryForm={},this.getData()},sizeChange:function(e){this.table.size=e,this.getData()},currentChange:function(e){this.table.current=e,this.getData()},getData:function(){var e=this;e.req("/user",{},function(t){t.success?e.records=t.obj.records:e.$alert(t.message,e.$t("tip.tip"),{confirmButtonText:e.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})},"get")},toDel:function(e){var t=this,r=this;this.$confirm(this.$t("tip.delTip"),this.$t("tip.tip"),{confirmButtonText:this.$t("button.confirm"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then(function(){t.req("/user/"+e.id,{},function(e){e.success?(r.$message({message:r.$t("tip.success"),type:"success"}),r.getData()):r.$alert(e.message,r.$t("tip.tip"),{confirmButtonText:r.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})},"delete")}).catch(function(){})},toEdit:function(e){this.dTit="Edit user",this.dialogVisible=!0,this.userForm=JSON.parse(o()(e))},toAdd:function(){this.dTit="Add user",this.dialogVisible=!0,this.userForm={}},toSave:function(){var e=this;this.$refs.userForm.validate(function(t){t?e.userForm.id?e.req("/user/"+e.userForm.id,e.userForm,function(t){t&&t.success?(e.dialogVisible=!1,e.getData()):e.$alert(t.message,e.$t("tip.tip"),{confirmButtonText:e.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})},"put"):e.req("/user",e.userForm,function(t){t&&t.success?(e.dialogVisible=!1,e.getData()):e.$alert(t.message,e.$t("tip.tip"),{confirmButtonText:e.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})}):e.$message.error("校验失败，请认真填写")})},statusChange:function(e){var t=this;delete e.email,t.req("/user/"+e.id,e,function(e){e&&e.success||t.$alert(e.message,t.$t("tip.tip"),{confirmButtonText:t.$t("button.close"),type:"warning"}).then(function(){}).catch(function(){})},"put")}},mounted:function(){this.$nextTick(function(){this.loadUserGroup(),this.getData()})}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"searchDiv"},[r("div",{staticClass:"searchRow"},[r("div",{staticClass:"searchCol"},[r("div",{staticClass:"labelDiv"},[e._v("用户名")]),e._v(" "),r("div",{staticClass:"inputDiv"},[r("el-input",{attrs:{placeholder:"Name",size:"mini",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)]),e._v(" "),r("div",{staticClass:"searchCol"},[r("div",{staticClass:"labelDiv"},[e._v("用户组")]),e._v(" "),r("div",{staticClass:"inputDiv"},[r("el-select",{attrs:{placeholder:"Group",size:"mini",clearable:""},model:{value:e.queryForm.user_group,callback:function(t){e.$set(e.queryForm,"user_group",t)},expression:"queryForm.user_group"}},e._l(e.groupOptions,function(e,t){return r("el-option",{key:"g"+t,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),r("div",{staticClass:"searchCol"},[r("div",{staticClass:"labelDiv"},[e._v("角色")]),e._v(" "),r("div",{staticClass:"inputDiv"},[r("el-select",{attrs:{placeholder:"Role",size:"mini",clearable:""},model:{value:e.queryForm.user_group_role,callback:function(t){e.$set(e.queryForm,"user_group_role",t)},expression:"queryForm.user_group_role"}},e._l(e.roleOptions,function(e,t){return r("el-option",{key:"r"+t,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),r("div",{staticClass:"searchCol"},[r("div",{staticClass:"labelDiv"},[e._v("邮箱")]),e._v(" "),r("div",{staticClass:"inputDiv"},[r("el-input",{attrs:{placeholder:"Name",size:"mini",clearable:""},model:{value:e.queryForm.email,callback:function(t){e.$set(e.queryForm,"email",t)},expression:"queryForm.email"}})],1)]),e._v(" "),r("div",{staticClass:"searchCol"},[r("div",{staticClass:"labelDiv"},[e._v("状态")]),e._v(" "),r("div",{staticClass:"inputDiv"},[r("el-select",{attrs:{placeholder:"Role",size:"mini",clearable:""},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},[r("el-option",{attrs:{label:"activated",value:"activated"}}),e._v(" "),r("el-option",{attrs:{label:"pending",value:"pending"}})],1)],1)]),e._v(" "),r("div",{staticClass:"searchBtnWrap"},[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.toAdd}},[e._v(e._s(e.$t("button.add")))])],1)])]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userRecords,stripe:"",border:"",size:"mini","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"序号",type:"index","show-overflow-tooltip":"",width:"55",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"用户名","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"user_group",label:"用户组","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"campus_card_id",label:"校园卡","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"department",label:"院系","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"user_group_role",label:"角色","show-overflow-tooltip":"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"activated","inactive-value":"pending"},on:{change:function(r){return e.statusChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"Oper",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"editBtn",attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline",circle:""},on:{click:function(r){return e.toEdit(t.row)}}}),e._v(" "),r("el-button",{staticClass:"delBtn",attrs:{type:"primary",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.toDel(t.row)}}})]}}])})],1),e._v(" "),r("el-dialog",{staticClass:"userForm",attrs:{title:e.dTit,width:"560px","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,"label-width":"100px",size:"mini",rules:e.userRules}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("div",{staticStyle:{height:"28px",overflow:"hidden"}},[r("el-input",{staticStyle:{width:"370px"},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"密码"}},[r("el-input",{staticStyle:{width:"370px"},attrs:{"show-password":""},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户组",prop:"user_group_id"}},[r("el-select",{staticStyle:{width:"370px"},model:{value:e.userForm.user_group_id,callback:function(t){e.$set(e.userForm,"user_group_id",t)},expression:"userForm.user_group_id"}},e._l(e.userGroupList,function(e,t){return r("el-option",{key:"g"+t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"校园卡号",prop:"campus_card_id"}},[r("el-input",{staticStyle:{width:"370px"},model:{value:e.userForm.campus_card_id,callback:function(t){e.$set(e.userForm,"campus_card_id",t)},expression:"userForm.campus_card_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"院系",prop:"department"}},[r("el-input",{staticStyle:{width:"370px"},model:{value:e.userForm.department,callback:function(t){e.$set(e.userForm,"department",t)},expression:"userForm.department"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{staticStyle:{width:"370px"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1)],1),e._v(" "),r("div",{staticClass:"dialogFooter",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.toSave}},[e._v(e._s(e.$t("button.confirm")))]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)},staticRenderFns:[]};var u=r("VU/8")(l,n,!1,function(e){r("YPLy")},"data-v-6a934f0a",null);t.default=u.exports},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},YPLy:function(e,t){},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var s,o=r("C4MV"),i=(s=o)&&s.__esModule?s:{default:s};t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},mClu:function(e,t,r){var s=r("kM2E");s(s.S+s.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})}});
//# sourceMappingURL=0.78079922f93240d9d113.js.map